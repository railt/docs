# Консольные команды

Railt поддерживает работу с консолью. Команды реализуются с 
помощью соответсвующего [компонента Symfony](https://symfony.com/doc/4.1/console.html).

## Консольное приложение Railt

Railt уже содержит консольный скрипт, позволяющий запускать встроенные команды. 
Для этого достаточно выполнить `vendor/bin/railt` (или `vendor/bin/railt.bat` в 
том случае, если используется ОС Windows).

Однако, можно поступить проще и переместить консольный скрипт в корень. 
Для этого выполните из корня вашего приложения:

```bash
$ cp ./vendor/railt/railt/bin/railt ./railt
```

Теперь, например, для того, чтобы вывести список всех доступных 
расширений - можно вызывать команду без указания директории `vendor/...`:

```bash
$ php railt extensions:list
```

## Глобальные команды

Для того, чтобы автоматически добавить команду требуется добавить 
ссылку на класс соответсвующей команды в секцию `commands` файла `composer.json`.

```json
{
    "extra": {
        "railt": {
            "commands": [
                "App\\Console\\ExampleCommand"
            ] 
        }
    }
}
```

?> Не забудьте выполнить `composer dump-autoload` после обновления любых данных 
railt внутри `composer.json`.

?> Подробнее о секции `"extra"` можно прочитать на странице 
[документации Composer](https://getcomposer.org/doc/04-schema.md#extra).

После проделанных операций - консольная команда появится в списке доступных для 
консольного приложения railt.

## Отключение глобальных команд

Для того, чтобы исключить любое расширение из списка подключаемых - следует 
указать это явно в секции `except` файла `composer.json`.

```json
{
    "extra": {
        "discovery": {
            "railt": {
                "except": [
                    "commands.App\\Console\\ExampleCommand"
                ]
            }
        }
    }
}
```

## Локальные команды

Для того, чтобы добавить какое-либо расширение во время выполнения приложения
стоит воспользоваться методом `add` у экземпляра консольного приложения.

Давайте добавим простую консольную команду, а затем запустим 
консольное приложение:

```php
#!/usr/bin/env php
<?php
$app = new Railt\Foundation\Application();

// Получаем консольное приложение
$cli = $app->getConsoleApplication();

$cli->add(new ExampleConsoleCommand());

$cli->run();
```
